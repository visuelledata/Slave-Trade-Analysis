---
title: "Untitled"
author: "Chris Peralta"
date: "May 10, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(janitor)
library(lubridate)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
slave_db <- haven::read_sav("Data/tastdb-exp-2016.sav")

slave_db <- slave_db %>% 
  convert_to_NA(c('NaN', '')) %>% 
  remove_empty(c('rows', "cols")) %>% #removes adult4 (adults embarked at second point of purchase)
  select_if(function(col) {sum(!is.na(col)) > 10000}) %>% 
  select(-c(datedepa, datedepb, datedepc)) #already joined in datedep car
```



```{r}
glimpse(slave_db)









```
## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
slave_db %>% 
    ggplot(aes(x = guns, y = tonnage)) + 
    geom_jitter() + 
    facet_wrap(~national)


slave_db %>% 
  ggplot(aes(slintend, tslavesd)) + 
  geom_point()


slave_db %>% 
  ggplot(aes(sladamer, sladvoy)) + 
  geom_jitter()


slave_db %>% 
  group_by(resistance) %>% 
  count() %>% 
  arrange(desc(n)) %>% 
  head(n = 10) %>% 
  ggplot(aes(x = factor(resistance), y = n)) + 
  geom_col()


```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
